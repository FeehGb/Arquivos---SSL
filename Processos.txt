1 -- Instalar OpenSSL
Abri console na pasta OpenSSL-Win64\bin>

2 -- Criar arquivo com nome => v3.ext e adicionar essas linhas

authorityKeyIdentifier=keyid,issuer
basicConstraints=CA:FALSE
keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment
subjectAltName = @alt_names
 
[alt_names]
DNS.1 = localhost

3 -- CRIAR CA cert

#openssl genrsa -des3 -out rootCA.key 2048
#openssl req -x509 -new -nodes -key rootCA.key -sha256 -days 1024 -out rootCA.pem
#openssl req -new -sha256 -nodes -out server.csr -newkey rsa:2048 -keyout server.key -config C:\OpenSSL-Win64\bin\openssl.cfg 
#openssl x509 -req -in server.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out server.crt -days 500 -sha256 -extfile v3.ext


#MESMO PROCESSO MAIS RAPIDO
openssl req -x509 -nodes -new -sha256 -days 1024 -newkey rsa:2048 -keyout RootCA.key -out RootCA.pem -subj "/C=US/CN=rootCA"
openssl x509 -outform pem -in RootCA.pem -out RootCA.crt
openssl req -new -nodes -newkey rsa:2048 -keyout server.key -out server.csr -subj "/C=BR/ST=Parana/L=Curitiba/O=Example-Certificates/CN=observatoriodotabaco"
openssl x509 -req -sha256 -days 1024 -in server.csr -CA RootCA.pem -CAkey RootCA.key -CAcreateserial -extfile v3.ext -out server.crt


4 -- EDITAR O ARQUIVO HTTPD-SSL.CONF


Listen 443
SSLCipherSuite HIGH:MEDIUM:!MD5:!RC4
SSLProxyCipherSuite HIGH:MEDIUM:!MD5:!RC4
SSLHonorCipherOrder on 
SSLProtocol all -SSLv3
SSLProxyProtocol all -SSLv3
SSLPassPhraseDialog  builtin
SSLSessionCache        "shmcb:c:/Apache24/logs/ssl_scache(512000)"
SSLSessionCacheTimeout  300


<VirtualHost _default_:443>

DocumentRoot "C:/wamp64/www/observ"
ServerName observatoriodotabaco:443
ServerAdmin admin@example.com
ErrorLog "C:/wamp64/bin/apache/apache2.4.23/logs/error.log"
TransferLog "C:/wamp64/bin/apache/apache2.4.23/logs/access.log"

#   SSL Engine Switch:
#   Enable/Disable SSL for this virtual host.
SSLEngine on

#   Server Certificate:
SSLCertificateFile "C:/wamp64/bin/apache/apache2.4.23/certificados/server.crt"


#   Server Private Key:
SSLCertificateKeyFile "C:/wamp64/bin/apache/apache2.4.23/certificados/server.key"

<FilesMatch "\.(cgi|shtml|phtml|php)$">
    SSLOptions +StdEnvVars
</FilesMatch>
<Directory "c:/Apache24/cgi-bin">
    SSLOptions +StdEnvVars
</Directory
BrowserMatch "MSIE [2-5]" \
         nokeepalive ssl-unclean-shutdown \
         downgrade-1.0 force-response-1.0


CustomLog "C:/wamp64/bin/apache/apache2.4.23/logs/ssl_request.log" \
          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"

</VirtualHost>                                  

5 -- MOVER AS CHAVES CRIADAS PARA PASTA Apache\bin\ssl * no exemplo acima a pasta 
6 -- ADICIONAR CERTIFICADO COMO CONFIALVEL NO CHROME E NO UBUNTU


